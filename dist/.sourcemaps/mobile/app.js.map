{"version":3,"sources":["../../packages/mobile/app.ts"],"names":[],"mappings":"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","file":"../../mobile/app.js","sourcesContent":["import { computed, defineComponent, h, ref, watch } from 'vue';\nimport { SearcherType, SearcherOption } from '../types';\nimport Menu, { getLabel as gm } from './menu';\nimport Menus, { getLabel as gms } from './menus';\nimport Input, { getLabel as gi } from './input';\nimport Select, { getLabel as gs } from './select';\nimport Selects, { getLabel as gss } from './selects';\nimport Tags, { getLabel as gt } from './tags';\nimport Datapicker, { getLabel as gd } from './datapicker';\nimport { difference, map } from 'lodash';\nimport { Select as AntSelect } from 'ant-design-vue';\nimport { PickerGroup, Popup } from 'vant';\n\nexport default defineComponent({\n    components: { Menu, Menus, Input, Select, Selects, Tags, Datapicker },\n    props: ['options', 'onChange', 'placeholder'],\n    setup(props) {\n        const options = ref<SearcherOption[]>(props.options);\n        watch(options, () => props.onChange && props.onChange(options.value), { deep: true });\n        const value = computed(() => {\n            let data: any = {};\n            // console.log(3333, options.value);\n            map(options.value, option => {\n                if (!option.current) return null;\n                if (option.current.length === 0) return null;\n                let d = {};\n                if (option.type === SearcherType.MENU) d = gm(option);\n                if (option.type === SearcherType.MENUS) d = gms(option);\n                if (option.type === SearcherType.INPUT) d = gi(option);\n                if (option.type === SearcherType.SELECT) d = gs(option);\n                if (option.type === SearcherType.SELECTS) d = gss(option);\n                if (option.type === SearcherType.TAGS) d = gt(option);\n                if (option.type === SearcherType.DATAPICKER) d = gd(option);\n                data = { ...data, ...d };\n            });\n            return data;\n        });\n\n        const visible = ref<boolean>(false);\n        function onVisibleChange(v: boolean) {\n            if (v) visible.value = v;\n        }\n        function onChange(data: string[]) {\n            const diff = difference(Object.keys(value.value), data);\n            map(diff, dkey => {\n                const v = value.value[dkey];\n                options.value = map(options.value.slice(), option => {\n                    if (option.value === v) return { ...option, current: [] };\n                    return { ...option };\n                });\n            });\n        }\n        return { options, value, onChange, visible, onVisibleChange, SearcherType };\n    },\n    render() {\n        return h('div', { class: 'searcher-root mobile', onMousedown: (e: Event) => e.stopPropagation() }, [\n            h(AntSelect, {\n                class: 'sresel', dropdownClassName: 'searcher-menu',\n                value: Object.keys(this.value), mode: 'multiple', showSearch: true, allowClear: true,\n                filterOption: (input: string, option: any) => option.value.toLowerCase().indexOf(input.toLowerCase()) >= 0,\n                placeholder: this.placeholder, onDropdownVisibleChange: this.onVisibleChange,\n                onChange: this.onChange, getPopupContainer: el => el,\n            }, []),\n            h(Popup, {\n                show: this.visible, 'onUpdate:show': visible => this.visible = visible,\n                round: true, position: 'bottom',\n            }, [\n                h(PickerGroup, {\n                    title: '', tabs: map(this.options, ({ label }) => label),\n                    onConfirm: () => { }, onCancel: () => { },\n                }, map(this.options, option => {\n                    return h('div', {}, [option.label]);\n                })),\n            ]),\n        ]);\n    },\n});\n"]}