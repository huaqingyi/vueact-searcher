{"version":3,"sources":["../../packages/pc/menus.ts"],"names":[],"mappings":"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","file":"../../pc/menus.js","sourcesContent":["import { Input } from 'ant-design-vue';\nimport { CheckOutlined } from '@ant-design/icons-vue';\nimport { debounce, findIndex, map } from 'lodash';\nimport { computed, defineComponent, h, onMounted, ref } from 'vue';\nimport { SearcherOption } from '../types';\n\nexport default defineComponent({\n    props: ['option', 'modelValue', 'props'],\n    emits: ['update:modelValue'],\n    setup(props, { emit }) {\n        const options = ref<SearcherOption[]>([]);\n        const search = ref<string>('');\n        const onSearch = debounce(async search => {\n            options.value = await props.option.store(search);\n        }, 500);\n\n        const value = computed({\n            get: () => props.modelValue,\n            set: value => emit('update:modelValue', value),\n        });\n\n        onMounted(async () => {\n            options.value = await props.option.store();\n        });\n        return { options, search, onSearch, value };\n    },\n    render() {\n        return h('div', { class: 'childcctx' }, [\n            h('div', { class: 'cccsearch' }, [\n                h(Input, {\n                    size: 'small', 'model-value': this.search,\n                    onInput: ({ target }) => {\n                        this.search = target.value || '';\n                        this.onSearch(this.search);\n                    },\n                }),\n            ]),\n        ].concat(map(this.options, option => {\n            return h('div', {\n                class: 'menu', onClick: () => {\n                    if (!this.value) return this.value = [option];\n                    let value: any[] = this.value.slice();\n                    const idx = findIndex(this.value, ({ value }: any) => value === option.value);\n                    if (idx >= 0) value = value.slice(0, idx).concat(value.slice(idx + 1));\n                    else value.push(option);\n                    this.value = value;\n                },\n            }, [\n                h('div', { class: 'menutext' }, [option.label]),\n            ].concat((this.value || []).find(({ value }: any) => value === option.value) ? [\n                h(CheckOutlined, {}, []),\n            ] : []));\n        })).concat([\n            h('div', { class: 'cccsfooter' }, []),\n        ]));\n    },\n});\n\nexport function getLabel(option: SearcherOption) {\n    return { [`${option.label}: ${map(option.current, ({ value }) => value).join(',')}`]: option.value };\n}\n"]}