{"version":3,"sources":["../../packages/app.ts"],"names":[],"mappings":"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","file":"../app.js","sourcesContent":["import { computed, defineComponent, h, ref, watch } from 'vue';\nimport { SearcherType, SearcherOption } from './types';\nimport Menu, { getLabel as gm } from './menu';\nimport Menus, { getLabel as gms } from './menus';\nimport Input, { getLabel as gi } from './input';\nimport Select, { getLabel as gs } from './select';\nimport Selects, { getLabel as gss } from './selects';\nimport Tags, { getLabel as gt } from './tags';\nimport Datapicker, { getLabel as gd } from './datapicker';\nimport { difference, map } from 'lodash';\nimport { Select as AntSelect } from 'ant-design-vue';\n\nexport default defineComponent({\n    components: { Menu, Menus, Input, Select, Selects, Tags, Datapicker },\n    props: ['options', 'onChange', 'placeholder'],\n    setup(props) {\n        const options = ref<SearcherOption[]>(props.options);\n        watch(options, () => props.onChange && props.onChange(options.value), { deep: true });\n        const value = computed(() => {\n            let data: any = {};\n            // console.log(3333, options.value);\n            map(options.value, option => {\n                if (!option.current) return null;\n                if (option.current.length === 0) return null;\n                let d = {};\n                if (option.type === SearcherType.MENU) d = gm(option);\n                if (option.type === SearcherType.MENUS) d = gms(option);\n                if (option.type === SearcherType.INPUT) d = gi(option);\n                if (option.type === SearcherType.SELECT) d = gs(option);\n                if (option.type === SearcherType.SELECTS) d = gss(option);\n                if (option.type === SearcherType.TAGS) d = gt(option);\n                if (option.type === SearcherType.DATAPICKER) d = gd(option);\n                data = { ...data, ...d };\n            });\n            return data;\n        });\n\n        function onHover(option: SearcherOption) {\n            options.value = map(options.value.slice(), opt => {\n                if (opt.value === option.value) return { ...opt, isHover: true };\n                return { ...opt, isHover: false };\n            });\n        }\n\n        const visible = ref<boolean>(false);\n        function onVisibleChange(v: boolean) {\n            if (v) visible.value = v;\n        }\n        function onChange(data: string[]) {\n            const diff = difference(Object.keys(value.value), data);\n            map(diff, dkey => {\n                const v = value.value[dkey];\n                options.value = map(options.value.slice(), option => {\n                    if (option.value === v) return { ...option, current: [] };\n                    return { ...option };\n                });\n            });\n        }\n        document.body.addEventListener('mousedown', e => visible.value = false);\n        return { options, value, onChange, onHover, visible, onVisibleChange, SearcherType };\n    },\n    render() {\n        return h('div', { class: 'searcher-root', onMousedown: (e: Event) => e.stopPropagation() }, [\n            h(AntSelect, {\n                class: 'sresel', dropdownClassName: 'searcher-menu',\n                value: Object.keys(this.value), mode: 'multiple', showSearch: true, allowClear: true,\n                filterOption: (input: string, option: any) => option.value.toLowerCase().indexOf(input.toLowerCase()) >= 0,\n                placeholder: this.placeholder, onDropdownVisibleChange: this.onVisibleChange,\n                onChange: this.onChange, getPopupContainer: el => el,\n            }, []),\n        ].concat(this.visible ? [\n            h('div', { class: 'searcher-root-menu' }, [\n                h('div', { class: 'srmctx' }, map(this.options, option => {\n                    return h('div', {\n                        class: ['menu', { opend: option.isHover || false }],\n                        key: option.value, onMouseenter: (e: MouseEvent) => {\n                            e.preventDefault();\n                            e.stopPropagation();\n                            this.onHover(option);\n                        },\n                    }, [\n                        option.label,\n                        h('div', { class: 'children' }, option.isHover ? [\n                            h('div', { class: 'child-container' }, ([] as any[]).concat(option.type === SearcherType.MENU ? [\n                                h(Menu, { option, modelValue: option.current, \"onUpdate:modelValue\": current => option.current = current }, []),\n                            ] : []).concat(option.type === SearcherType.MENUS ? [\n                                h(Menus, { option, modelValue: option.current, \"onUpdate:modelValue\": current => option.current = current }, []),\n                            ] : []).concat(option.type === SearcherType.INPUT ? [\n                                h(Input, { option, modelValue: option.current, \"onUpdate:modelValue\": current => option.current = current }, []),\n                            ] : []).concat(option.type === SearcherType.SELECT ? [\n                                h(Select, { option, modelValue: option.current, \"onUpdate:modelValue\": current => option.current = current }, []),\n                            ] : []).concat(option.type === SearcherType.SELECTS ? [\n                                h(Selects, { option, modelValue: option.current, \"onUpdate:modelValue\": current => option.current = current }, []),\n                            ] : []).concat(option.type === SearcherType.TAGS ? [\n                                h(Tags, { option, modelValue: option.current, \"onUpdate:modelValue\": current => option.current = current }, []),\n                            ] : []).concat(option.type === SearcherType.DATAPICKER ? [\n                                h(Datapicker, { option, modelValue: option.current, \"onUpdate:modelValue\": current => option.current = current }, []),\n                            ] : [])),\n                        ] : []),\n                    ]);\n                })),\n            ]),\n        ] : []));\n    },\n});\n"]}